# 🎤 Question 25

## JPA에서 Transaction의 Propagation은 무엇인가요?

> Transaction Propagation은 한 트랜잭션의 작업 내용이 다른 트랜잭션에 그대로 전파되는, 즉 영향을 줄 수 있는 방법을 말합니다.
> JPA 자체적으로는 트랜잭션 전파 정책을 정의하지 않습니다. 하지만, JPA는 Spring과 같은 프레임워크와 함께 사용될 때 해당 프레임워크의 트랜잭션 전파 정책을 따르게 됩니다.
> 
> Spring에서는 트랜잭션 전파 정책을 설정하는 여러 개의 옵션을 제공합니다.
> 
> 기본적으로 메서드 호출 간에 여러 트랜잭션을 함께 처리하거나 트랜잭션이 필요하지 않은 간단한 읽기 전용 작업을 처리하는 경우 등에 사용됩니다.
> 
> **1. REQUIRED**
> - 가장 많이 사용하는 기본 설정입니다.
> - 트랜잭션이 필수로, 기존 트랜잭션이 없다면 생성하고, 있으면 기존의 트랜잭션에 참여합니다.
> 
> **2. SUPPORTS**
> - 기존 트랜잭션이 없다면 없는대로 진행하고, 있으면 있는 트랜잭션에 참여합니다.
> 
> **3. MANDATORY**
> - 반드시 트랜잭션이 있어야 합니다.
> - 기존 트랜잭션이 없다면 예외가 발생합니다.
> 
> **4. REQUIRES_NEW**
> - 항상 새로운 트랜잭션을 생성합니다.
> - 기존 트랜잭션이 있을 때나 없을 때나 새로운 트랜잭션을 생성합니다.
> 
> **5. NOT_SUPPORTED**
> - 트랜잭션을 지원하지 않는다는 뜻으로, 기존 트랜잭션이 있을 때나 없을 때나 트랜잭션 없이 진행합니다.
> 
> **6. NEVER**
> - 트랜잭션을 사용하지 않는다는 뜻으로, 기존 트랜잭션이 있다면 예외가 발생합니다.
> 
> **7. NESTED**
> - 중첩 트랜잭션은 외부 트랜잭션에 영향을 받지만, 중첩 트랜잭션은 외부에 영향을 주지 않습니다.
> - 중첩 트랜잭션이 롤백되어도 외부 트랜잭션은 커밋할 수 있고, 외부 트랜잭션이 롤백되면 중첩 트랜잭션도 함께 롤백됩니다.
> - 기존 트랜잭션이 없으면 새로운 트랜잭션을 생성하고, 있다면 중첩 트랜잭션을 만듭니다.

<br/>

---

<br/>

## 📌 트랜잭션 전파 속성

- 스프링이 제공하는 선언적 트랜잭션(e.g., `@Transactioanl`)의 장점 중 하나는 여러 트랜잭션을 묶어서 커다란 하나의 트랜잭션 경계를 만들 수 있다는 점. 
- 이미 트랜잭션이 진행 중일 때 추가 트랜잭션 진행을 어떻게 할지 결정하는 것이 전파 속성이다.
- 전파 속성에 따라서 기존의 트랜잭션에 참여할 수도 있고, 별도의 트랜잭션으로 진행할 수도 있고, 에러를 발생시키는 등의 선택을 할 수도 있다.

<p align="center">
    <img src="/JPA/interview/img/Q25/img.png" width="900"/>
</p>